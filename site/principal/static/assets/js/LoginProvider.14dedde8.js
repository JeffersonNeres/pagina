"use strict";function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var t=0;t<i.length;t++){var o=i[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,i,t){return i&&_defineProperties(e.prototype,i),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var LoginProvider=function(){function e(){_classCallCheck(this,e),this.emailInput=$("#login-email"),this.formDefault=$("#form-default"),this.formSSO=$("#form-sso"),this.backToDefaulForm=$("#back-to-default-form"),this.companyName=$("#sso-company-name"),this.companyUrl=$("#sso-company-url")}return _createClass(e,[{key:"_callProvider",value:function(){$.ajax({type:"GET",url:"/sso/provider",data:{emailOrDomain:this.emailInput.val()},success:this._success.bind(this),fail:this._hasNoSSO.bind(this)})}},{key:"_success",value:function(e){1==e.hasDomain?this._hasSSO(e):this._hasNoSSO()}},{key:"_hasSSO",value:function(e){this._fillCompanyInformations(e),this._showSSOForm()}},{key:"_hasNoSSO",value:function(){this._hideSSOForm()}},{key:"_fillCompanyInformations",value:function(e){this.companyName.text(e.name),this.companyUrl.attr("href",e.url)}},{key:"_showSSOForm",value:function(){this.formDefault.hide(),this.formSSO.show()}},{key:"_hideSSOForm",value:function(){this.formDefault.show(),this.formSSO.hide()}},{key:"refreshListener",value:function(){this.emailInput.on("blur",this._callProvider.bind(this)),this.backToDefaulForm.on("click",this._hideSSOForm.bind(this))}}]),e}();